<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= guild.name %> - Phantom Guard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-dark text-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="/img/logo.png" alt="Phantom Guard Logo" width="32" height="32" class="d-inline-block align-text-top me-2">
                Phantom Guard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/"><i class="bi bi-house-fill"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/dashboard/<%= guild.id %>">
                            <i class="bi bi-gear-fill"></i> <%= guild.name %>
                        </a>
                    </li>
                </ul>
                <div class="d-flex">
                    <div class="dropdown">
                        <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <img src="https://cdn.discordapp.com/avatars/<%= user.id %>/<%= user.avatar %>.png" alt="<%= user.username %>"
                                width="32" height="32" class="rounded-circle me-2">
                            <%= user.username %>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark">
                            <li><a class="dropdown-item" href="/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Server Header -->
    <div class="py-4 bg-dark">
        <div class="container">
            <div class="d-flex align-items-center">
                <% if (guild.icon) { %>
                    <img src="https://cdn.discordapp.com/icons/<%= guild.id %>/<%= guild.icon %>.png"
                        alt="<%= guild.name %>" class="rounded-circle me-3" width="80" height="80">
                <% } else { %>
                    <div class="rounded-circle bg-secondary me-3 d-flex align-items-center justify-content-center"
                        style="width: 80px; height: 80px;">
                        <span class="fw-bold text-light fs-2"><%= guild.name.charAt(0) %></span>
                    </div>
                <% } %>
                <div>
                    <h1 class="mb-0"><%= guild.name %></h1>
                    <p class="text-muted mb-0">Members: <%= guild.memberCount %> | Server ID: <%= guild.id %></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="bg-dark border-bottom border-secondary">
        <div class="container">
            <ul class="nav nav-tabs border-0">
                <li class="nav-item">
                    <a class="nav-link active text-light" data-bs-toggle="tab" href="#general">
                        <i class="bi bi-gear"></i> General
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" data-bs-toggle="tab" href="#verification">
                        <i class="bi bi-shield-check"></i> Verification
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" data-bs-toggle="tab" href="#security">
                        <i class="bi bi-shield-lock"></i> Security
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" data-bs-toggle="tab" href="#voice">
                        <i class="bi bi-mic"></i> Voice
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" data-bs-toggle="tab" href="#logs">
                        <i class="bi bi-list-ul"></i> Logs
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Tab Content -->
    <div class="container py-4">
        <div class="tab-content">
            <!-- General Tab -->
            <div class="tab-pane fade show active" id="general">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-sliders"></i> Basic Configuration</h5>
                            </div>
                            <div class="card-body">
                                <form id="generalSettingsForm">
                                    <div class="mb-3">
                                        <label for="prefix" class="form-label">Command Prefix</label>
                                        <input type="text" class="form-control bg-dark text-light border-secondary" id="prefix"
                                            value="<%= serverConfig.prefix || '!' %>" maxlength="3">
                                        <div class="form-text text-muted">The prefix used for text commands.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="notificationChannel" class="form-label">Notification Channel</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="notificationChannel">
                                            <option value="">-- Select a channel --</option>
                                            <% channels.forEach(channel => { %>
                                                <option value="<%= channel.id %>" <%= serverConfig.notificationChannelId === channel.id ? 'selected' : '' %>>
                                                    #<%= channel.name %>
                                                </option>
                                            <% }); %>
                                        </select>
                                        <div class="form-text text-muted">Where bot notifications will be sent.</div>
                                    </div>
                                    <div class="mb-3 form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="deleteCommands" 
                                            <%= serverConfig.deleteCommands ? 'checked' : '' %>>
                                        <label class="form-check-label" for="deleteCommands">Delete command messages</label>
                                        <div class="form-text text-muted">Automatically delete command messages after execution.</div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-info-circle"></i> Bot Status</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush bg-dark">
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Status:</span>
                                        <span class="badge bg-success">Online</span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Ping:</span>
                                        <span><%= client.ws.ping %>ms</span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Commands:</span>
                                        <span><%= client.commands ? client.commands.size : 'N/A' %></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card bg-dark border-secondary">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-stars"></i> Premium Status</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <span class="badge <%= serverConfig.premium ? 'bg-warning text-dark' : 'bg-secondary' %> p-2 fs-6">
                                        <%= serverConfig.premium ? 'PREMIUM' : 'FREE' %>
                                    </span>
                                </div>
                                <p class="<%= serverConfig.premium ? 'text-warning' : 'text-muted' %>">
                                    <%= serverConfig.premium ? 
                                        'This server has premium features enabled!' : 
                                        'Upgrade to premium to access advanced features.' %>
                                </p>
                                <% if (!serverConfig.premium) { %>
                                    <button class="btn btn-warning text-dark w-100">
                                        <i class="bi bi-stars"></i> Upgrade to Premium
                                    </button>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Verification Tab -->
            <div class="tab-pane fade" id="verification">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-youtube"></i> YouTube Verification Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="verificationSettingsForm">
                                    <div class="mb-3">
                                        <label for="youtubeChannel" class="form-label">YouTube Channel ID</label>
                                        <input type="text" class="form-control bg-dark text-light border-secondary" id="youtubeChannel"
                                            value="<%= serverConfig.youtubeChannelId || '' %>">
                                        <div class="form-text text-muted">The YouTube channel users must subscribe to.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="verificationChannel" class="form-label">Verification Channel</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="verificationChannel">
                                            <option value="">-- Select a channel --</option>
                                            <% channels.forEach(channel => { %>
                                                <option value="<%= channel.id %>" <%= serverConfig.verificationChannelId === channel.id ? 'selected' : '' %>>
                                                    #<%= channel.name %>
                                                </option>
                                            <% }); %>
                                        </select>
                                        <div class="form-text text-muted">Channel where users post verification screenshots.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="verifiedRole" class="form-label">Verified Role</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="verifiedRole">
                                            <option value="">-- Select a role --</option>
                                            <% roles.forEach(role => { %>
                                                <option value="<%= role.id %>" 
                                                    <%= serverConfig.roleId === role.id ? 'selected' : '' %>
                                                    style="color: <%= role.color ? '#' + role.color.toString(16).padStart(6, '0') : 'white' %>;">
                                                    <%= role.name %>
                                                </option>
                                            <% }); %>
                                        </select>
                                        <div class="form-text text-muted">Role assigned to verified subscribers.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="unverifiedRole" class="form-label">Unverified Role</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="unverifiedRole">
                                            <option value="">-- Select a role --</option>
                                            <% roles.forEach(role => { %>
                                                <option value="<%= role.id %>" 
                                                    <%= serverConfig.unverifiedRoleId === role.id ? 'selected' : '' %>
                                                    style="color: <%= role.color ? '#' + role.color.toString(16).padStart(6, '0') : 'white' %>;">
                                                    <%= role.name %>
                                                </option>
                                            <% }); %>
                                        </select>
                                        <div class="form-text text-muted">Role assigned to users who haven't verified yet.</div>
                                    </div>
                                    <div class="mb-3 form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="autoVerification" 
                                            <%= serverConfig.autoVerification ? 'checked' : '' %>>
                                        <label class="form-check-label" for="autoVerification">Automatic verification</label>
                                        <div class="form-text text-muted">Try to automatically verify screenshots without manual approval.</div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Verification Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-people"></i> Verification Stats</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush bg-dark">
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Verified Members:</span>
                                        <span class="badge bg-success"><%= serverConfig.verifiedUsers ? serverConfig.verifiedUsers.length : 0 %></span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Verification Rate:</span>
                                        <span>
                                            <%= serverConfig.verificationStats && serverConfig.verificationStats.total > 0 ? 
                                                Math.round((serverConfig.verificationStats.success / serverConfig.verificationStats.total) * 100) + '%' : 
                                                'N/A' %>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer bg-dark border-secondary">
                                <button class="btn btn-outline-secondary w-100" id="viewVerifiedBtn">
                                    <i class="bi bi-list-check"></i> View Verified Users
                                </button>
                            </div>
                        </div>
                        <div class="card bg-dark border-secondary">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-shield-check"></i> CAPTCHA Verification</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="enableCaptcha"
                                        <%= serverConfig.captcha && serverConfig.captcha.enabled ? 'checked' : '' %>>
                                    <label class="form-check-label" for="enableCaptcha">Enable CAPTCHA Verification</label>
                                </div>
                                <div class="mb-3">
                                    <label for="captchaType" class="form-label">CAPTCHA Type</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="captchaType" 
                                        <%= !serverConfig.captcha || !serverConfig.captcha.enabled ? 'disabled' : '' %>>
                                        <option value="image" <%= serverConfig.captcha && serverConfig.captcha.type === 'image' ? 'selected' : '' %>>Image CAPTCHA</option>
                                        <option value="math" <%= serverConfig.captcha && serverConfig.captcha.type === 'math' ? 'selected' : '' %>>Math Problem</option>
                                        <option value="text" <%= serverConfig.captcha && serverConfig.captcha.type === 'text' ? 'selected' : '' %>>Text Challenge</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary w-100" id="saveCaptchaBtn" 
                                    <%= !serverConfig.captcha || !serverConfig.captcha.enabled ? 'disabled' : '' %>>
                                    Save CAPTCHA Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Tab -->
            <div class="tab-pane fade" id="security">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-shield-lock"></i> Security Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="securitySettingsForm">
                                    <div class="mb-3">
                                        <label class="form-label">Anti-Nuke Protection</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="antiNuke"
                                                <%= serverConfig.security && serverConfig.security.antiNuke ? 'checked' : '' %>>
                                            <label class="form-check-label" for="antiNuke">Enable Anti-Nuke Protection</label>
                                            <div class="form-text text-muted">Prevents mass deletion of channels and mass banning of members.</div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="nukeThreshold" class="form-label">Anti-Nuke Threshold</label>
                                        <input type="range" class="form-range" min="2" max="10" value="<%= serverConfig.security && serverConfig.security.nukeThreshold || 3 %>" id="nukeThreshold">
                                        <div class="d-flex justify-content-between">
                                            <span>2 (Strict)</span>
                                            <span id="nukeThresholdValue"><%= serverConfig.security && serverConfig.security.nukeThreshold || 3 %></span>
                                            <span>10 (Relaxed)</span>
                                        </div>
                                        <div class="form-text text-muted">How many suspicious actions before triggering anti-nuke measures.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Anti-Raid Protection</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="antiRaid"
                                                <%= serverConfig.security && serverConfig.security.antiRaid ? 'checked' : '' %>>
                                            <label class="form-check-label" for="antiRaid">Enable Anti-Raid Protection</label>
                                            <div class="form-text text-muted">Detects and prevents mass join raids.</div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="raidThreshold" class="form-label">Raid Join Threshold</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control bg-dark text-light border-secondary" id="raidThreshold"
                                                value="<%= serverConfig.security && serverConfig.security.raidThreshold || 10 %>" min="5" max="50">
                                            <span class="input-group-text bg-dark text-light border-secondary">joins in</span>
                                            <input type="number" class="form-control bg-dark text-light border-secondary" id="raidTime"
                                                value="<%= serverConfig.security && serverConfig.security.raidTimeSeconds || 30 %>" min="10" max="300">
                                            <span class="input-group-text bg-dark text-light border-secondary">seconds</span>
                                        </div>
                                        <div class="form-text text-muted">How many joins in what time period triggers raid detection.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Emergency Lockdown</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="emergencyLockdown"
                                                <%= serverConfig.security && serverConfig.security.lockdownEnabled ? 'checked' : '' %>>
                                            <label class="form-check-label" for="emergencyLockdown">Enable Emergency Lockdown Feature</label>
                                            <div class="form-text text-muted">Allows authorized users to trigger an emergency server lockdown.</div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Security Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-graph-up"></i> Security Status</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3 text-center">
                                    <div class="display-6 mb-2">
                                        <i class="bi bi-shield-fill-check text-success"></i>
                                    </div>
                                    <div class="h5">Security Status</div>
                                    <span class="badge bg-success p-2 fs-6">PROTECTED</span>
                                </div>
                                <ul class="list-group list-group-flush bg-dark">
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Anti-Nuke:</span>
                                        <span class="<%= serverConfig.security && serverConfig.security.antiNuke ? 'text-success' : 'text-danger' %>">
                                            <%= serverConfig.security && serverConfig.security.antiNuke ? 'Active' : 'Inactive' %>
                                        </span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Anti-Raid:</span>
                                        <span class="<%= serverConfig.security && serverConfig.security.antiRaid ? 'text-success' : 'text-danger' %>">
                                            <%= serverConfig.security && serverConfig.security.antiRaid ? 'Active' : 'Inactive' %>
                                        </span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Lockdown:</span>
                                        <span class="<%= serverConfig.security && serverConfig.security.inLockdown ? 'text-danger' : 'text-success' %>">
                                            <%= serverConfig.security && serverConfig.security.inLockdown ? 'ACTIVE' : 'Inactive' %>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer bg-dark border-secondary">
                                <button class="btn btn-danger w-100" id="triggerLockdownBtn"
                                    <%= serverConfig.security && serverConfig.security.lockdownEnabled ? '' : 'disabled' %>>
                                    <i class="bi bi-exclamation-triangle"></i> 
                                    <%= serverConfig.security && serverConfig.security.inLockdown ? 'End Lockdown' : 'Trigger Lockdown' %>
                                </button>
                            </div>
                        </div>
                        <div class="card bg-dark border-secondary">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Recent Security Events</h5>
                            </div>
                            <div class="card-body p-0">
                                <ul class="list-group list-group-flush bg-dark">
                                    <% if (serverConfig.security && serverConfig.security.events && serverConfig.security.events.length > 0) { %>
                                        <% serverConfig.security.events.slice(0, 5).forEach(event => { %>
                                            <li class="list-group-item bg-dark text-light border-secondary">
                                                <small class="text-muted"><%= new Date(event.timestamp).toLocaleString() %></small>
                                                <div><%= event.description %></div>
                                            </li>
                                        <% }); %>
                                    <% } else { %>
                                        <li class="list-group-item bg-dark text-light border-secondary">
                                            <div class="text-muted">No recent security events</div>
                                        </li>
                                    <% } %>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Voice Tab -->
            <div class="tab-pane fade" id="voice">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-mic"></i> Voice Channel Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="voiceSettingsForm">
                                    <div class="mb-3">
                                        <label class="form-label">Voice Announcements</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="voiceAnnouncements"
                                                <%= serverConfig.voiceAnnouncements !== false ? 'checked' : '' %>>
                                            <label class="form-check-label" for="voiceAnnouncements">Enable Voice Join/Leave Announcements</label>
                                            <div class="form-text text-muted">Announce when members join or leave voice channels.</div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="voiceLanguage" class="form-label">Announcement Language</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="voiceLanguage">
                                            <option value="en" <%= !serverConfig.language || serverConfig.language === 'en' ? 'selected' : '' %>>English</option>
                                            <option value="hi" <%= serverConfig.language === 'hi' ? 'selected' : '' %>>Hindi</option>
                                            <option value="hinglish" <%= serverConfig.language === 'hinglish' ? 'selected' : '' %>>Hinglish</option>
                                        </select>
                                        <div class="form-text text-muted">The language used for voice announcements.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="liveSubCountFormat" class="form-label">Live Sub Count Format</label>
                                        <input type="text" class="form-control bg-dark text-light border-secondary" id="liveSubCountFormat"
                                            value="<%= serverConfig.voiceChannelFormat || 'ðŸ“Š Subs: {count}' %>">
                                        <div class="form-text text-muted">Format for the live subscriber count voice channel. Use {count} for the number and {name} for channel name.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="updateFrequency" class="form-label">Update Frequency (minutes)</label>
                                        <input type="number" class="form-control bg-dark text-light border-secondary" id="updateFrequency"
                                            value="<%= serverConfig.updateFrequencyMinutes || 5 %>" min="5" max="60">
                                        <div class="form-text text-muted">How often to update the subscriber count (minimum 5 minutes).</div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Voice Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-soundwave"></i> Voice Status</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush bg-dark">
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Active Voice Channel:</span>
                                        <span class="<%= serverConfig.activeVoiceChannelId ? 'text-success' : 'text-muted' %>">
                                            <%= serverConfig.activeVoiceChannelName || 'None' %>
                                        </span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Voice Announcements:</span>
                                        <span class="<%= serverConfig.voiceAnnouncements !== false ? 'text-success' : 'text-danger' %>">
                                            <%= serverConfig.voiceAnnouncements !== false ? 'Enabled' : 'Disabled' %>
                                        </span>
                                    </li>
                                    <li class="list-group-item bg-dark text-light border-secondary d-flex justify-content-between">
                                        <span>Sub Count Channel:</span>
                                        <span class="<%= serverConfig.subCountChannelId ? 'text-success' : 'text-muted' %>">
                                            <%= serverConfig.subCountChannelId ? 'Active' : 'Not set' %>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="card-footer bg-dark border-secondary">
                                <button class="btn btn-outline-primary w-100" id="testVoiceBtn">
                                    <i class="bi bi-soundwave"></i> Test Voice Announcement
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs Tab -->
            <div class="tab-pane fade" id="logs">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-list-ul"></i> Logging Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="loggingSettingsForm">
                                    <div class="mb-3">
                                        <label class="form-label">Enable Logging</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="enableLogging"
                                                <%= serverConfig.logging && serverConfig.logging.enabled ? 'checked' : '' %>>
                                            <label class="form-check-label" for="enableLogging">Enable Server Activity Logging</label>
                                            <div class="form-text text-muted">Log server events to a designated channel.</div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="logChannel" class="form-label">Log Channel</label>
                                        <select class="form-select bg-dark text-light border-secondary" id="logChannel"
                                            <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                            <option value="">-- Select a channel --</option>
                                            <% channels.forEach(channel => { %>
                                                <option value="<%= channel.id %>" 
                                                    <%= serverConfig.logging && serverConfig.logging.channelId === channel.id ? 'selected' : '' %>>
                                                    #<%= channel.name %>
                                                </option>
                                            <% }); %>
                                        </select>
                                        <div class="form-text text-muted">Channel where logs will be sent.</div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Log Types</label>
                                        <div class="row g-2">
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logModeration"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('moderation') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logModeration">Moderation Actions</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logMembers"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('members') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logMembers">Member Join/Leave</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logMessages"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('messages') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logMessages">Message Edits/Deletes</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logVerification"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('verification') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logVerification">Verification Activity</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logSecurity"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('security') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logSecurity">Security Events</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="logVoice"
                                                        <%= serverConfig.logging && serverConfig.logging.types && serverConfig.logging.types.includes('voice') ? 'checked' : '' %>
                                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                                    <label class="form-check-label" for="logVoice">Voice Activity</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary" 
                                        <%= !(serverConfig.logging && serverConfig.logging.enabled) ? 'disabled' : '' %>>
                                        Save Logging Settings
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-dark border-secondary">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0"><i class="bi bi-info-circle"></i> Log Information</h5>
                            </div>
                            <div class="card-body">
                                <p>Logging helps you keep track of what's happening in your server. Configure which events to log and where to send them.</p>
                                <div class="alert alert-secondary">
                                    <i class="bi bi-lightbulb-fill me-2"></i>
                                    <strong>Tip:</strong> Create a dedicated private channel for logs to keep them separate from regular conversation.
                                </div>
                                <div class="mt-3">
                                    <h6>Log Status</h6>
                                    <div class="d-flex align-items-center mt-2">
                                        <div class="rounded-circle <%= serverConfig.logging && serverConfig.logging.enabled ? 'bg-success' : 'bg-danger' %> me-2" 
                                            style="width: 12px; height: 12px;"></div>
                                        <span><%= serverConfig.logging && serverConfig.logging.enabled ? 'Logging Enabled' : 'Logging Disabled' %></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-4 bg-dark border-top border-secondary mt-auto">
        <div class="container text-center">
            <p class="mb-0">&copy; 2025 Phantom Guard. All rights reserved.</p>
            <p class="small text-muted">Not affiliated with Discord or YouTube.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/server-settings.js"></script>
</body>
</html>